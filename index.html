<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a3d2b">
<title>La Fleur Transient Inn â€” Book Your Stay</title>
<meta name="description" content="Book your stay instantly. No account needed.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,500;0,600;0,700;1,500&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â”€â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;-webkit-text-size-adjust:100%;}
body{font-family:'Outfit',sans-serif;background:#f9f5ef;color:#1c1810;-webkit-font-smoothing:antialiased;min-height:100vh;overflow-x:hidden;}
button,input,select,textarea{font-family:'Outfit',sans-serif;}
button{cursor:pointer;-webkit-tap-highlight-color:transparent;}
a{color:inherit;}

/* â”€â”€â”€ Variables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root{
  --forest:#1a3d2b; --green:#2d6a4f; --sage:#52876a;
  --mint:#b0d4be; --mint-pale:#e8f4ec;
  --gold:#c8913c; --amber:#e6a018;
  --ivory:#f9f5ef; --linen:#ede5d8; --warm:#dfd5c8;
  --stone:#9a8c7e; --bark:#6a4c36; --ink:#1c1810; --mist:#7a6e62; --white:#fff;
  --red:#b83232; --red-pale:#fde8e8;
  --blue-pale:#dbeafe; --yellow-pale:#fefce8; --yellow-b:#fde68a;
  --r4:4px; --r8:8px; --r12:12px; --r16:16px; --r20:20px; --rpill:999px;
  --sh1:0 1px 4px rgba(28,24,16,.08);
  --sh2:0 4px 18px rgba(28,24,16,.12);
  --sh3:0 10px 36px rgba(28,24,16,.16);
  --shxl:0 20px 60px rgba(28,24,16,.22);
  --ease:.2s cubic-bezier(.4,0,.2,1);
}

/* â”€â”€â”€ Typography â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.serif{font-family:'Cormorant Garamond',Georgia,serif;}
.lbl{font-size:11px;font-weight:700;letter-spacing:.07em;text-transform:uppercase;color:var(--bark);display:block;margin-bottom:5px;}

/* â”€â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:7px;border:none;border-radius:var(--r8);font-size:15px;font-weight:600;transition:all var(--ease);white-space:nowrap;line-height:1;min-height:44px;padding:0 20px;-webkit-tap-highlight-color:transparent;}
.btn:active{transform:scale(.97);}
.btn:disabled{opacity:.5;cursor:not-allowed;}
.btn-lg{min-height:50px;font-size:16px;padding:0 28px;border-radius:var(--r12);}
.btn-sm{min-height:36px;font-size:13px;padding:0 14px;border-radius:var(--r8);}
.btn-xs{min-height:30px;font-size:12px;padding:0 10px;border-radius:var(--r4);}
.btn-forest{background:var(--forest);color:#fff;} .btn-forest:active{background:#122d1f;}
.btn-gold  {background:var(--gold);color:#fff;}   .btn-gold:active{background:#b07e30;}
.btn-sage  {background:var(--sage);color:#fff;}   .btn-sage:active{background:#3d6b52;}
.btn-red   {background:var(--red);color:#fff;}    .btn-red:active{background:#9e2a2a;}
.btn-outline{background:transparent;border:1.5px solid var(--forest);color:var(--forest);}
.btn-outline:active{background:var(--forest);color:#fff;}
.btn-ghost {background:transparent;border:1.5px solid var(--warm);color:var(--mist);}
.btn-ghost:active{background:var(--linen);}
.btn-wg{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.22);color:rgba(255,255,255,.85);font-size:13px;min-height:36px;padding:0 14px;border-radius:var(--r8);}
.btn-wg:active{background:rgba(255,255,255,.25);}

/* â”€â”€â”€ Inputs â€” 16px prevents iOS zoom â”€â”€â”€â”€â”€â”€â”€ */
.inp{width:100%;padding:13px 14px;border:1.5px solid var(--warm);border-radius:var(--r8);font-size:16px;color:var(--ink);background:var(--white);outline:none;transition:border-color var(--ease),box-shadow var(--ease);-webkit-appearance:none;appearance:none;}
.inp:focus{border-color:var(--green);box-shadow:0 0 0 3px rgba(45,106,79,.12);}
.inp.err{border-color:var(--red);box-shadow:0 0 0 3px rgba(184,50,50,.1);}
.inp::placeholder{color:var(--stone);}
select.inp{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='7'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%236a4c36' fill='none' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;padding-right:40px;}
textarea.inp{resize:vertical;min-height:90px;line-height:1.6;}
.field{display:flex;flex-direction:column;}
.err-msg{font-size:12px;color:var(--red);margin-top:4px;}

/* â”€â”€â”€ Cards / Panels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card{background:var(--white);border-radius:var(--r16);box-shadow:var(--sh2);overflow:hidden;}
.panel{background:var(--white);border-radius:var(--r12);border:1.5px solid var(--linen);padding:18px;}

/* â”€â”€â”€ Badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.badge{display:inline-flex;align-items:center;gap:5px;padding:4px 11px;border-radius:var(--rpill);font-size:12px;font-weight:600;}
.dot{width:7px;height:7px;border-radius:50%;flex-shrink:0;}

/* â”€â”€â”€ Row divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.irow{display:flex;justify-content:space-between;align-items:baseline;padding:9px 0;border-bottom:1px solid var(--linen);font-size:14px;gap:8px;}
.irow:last-child{border-bottom:none;}

/* â”€â”€â”€ Step bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.steps{display:flex;align-items:center;margin-bottom:24px;}
.snode{display:flex;align-items:center;gap:6px;flex-shrink:0;}
.scircle{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;transition:all .3s;flex-shrink:0;}
.sline{flex:1;height:2px;margin:0 6px;border-radius:2px;}

/* â”€â”€â”€ Payment option â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.popt{border:1.5px solid var(--warm);border-radius:var(--r12);padding:14px 16px;cursor:pointer;display:flex;align-items:center;gap:14px;transition:all var(--ease);-webkit-tap-highlight-color:transparent;}
.popt:active{background:#f7fbf9;}
.popt.on{border-color:var(--green);background:var(--mint-pale);box-shadow:0 0 0 3px rgba(45,106,79,.1);}
.pradio{width:20px;height:20px;border-radius:50%;border:2px solid var(--warm);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all var(--ease);}
.popt.on .pradio{border-color:var(--green);background:var(--green);}

/* â”€â”€â”€ Topbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.topbar{background:var(--forest);height:56px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;position:sticky;top:0;z-index:100;}

/* â”€â”€â”€ Room card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.rcard{background:var(--white);border-radius:var(--r16);box-shadow:var(--sh1);overflow:hidden;border:1.5px solid var(--linen);transition:box-shadow var(--ease);}
.rcard:active:not(.booked){box-shadow:var(--sh3);}
.rcard.booked{opacity:.55;}

/* â”€â”€â”€ Admin tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.atabs{display:flex;border-bottom:1.5px solid var(--warm);margin-bottom:18px;overflow-x:auto;-webkit-overflow-scrolling:touch;gap:2px;}
.atab{padding:10px 14px;font-size:13px;font-weight:600;color:var(--mist);background:none;border:none;border-bottom:2px solid transparent;margin-bottom:-1.5px;white-space:nowrap;cursor:pointer;min-height:44px;}
.atab.on{color:var(--green);border-bottom-color:var(--green);}
.brow{background:var(--white);border-radius:var(--r8);padding:14px 16px;display:flex;align-items:center;gap:10px;cursor:pointer;box-shadow:var(--sh1);border-left:3px solid transparent;flex-wrap:wrap;-webkit-tap-highlight-color:transparent;}
.brow:active{background:var(--linen);}

/* â”€â”€â”€ Overlay / Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.overlay{position:fixed;inset:0;background:rgba(10,8,5,.55);backdrop-filter:blur(6px);display:flex;align-items:flex-end;justify-content:center;z-index:200;animation:fadeIn .2s ease;}
.modal{background:var(--white);border-radius:20px 20px 0 0;padding:24px 20px 36px;width:100%;max-height:92vh;overflow-y:auto;-webkit-overflow-scrolling:touch;box-shadow:var(--shxl);animation:slideUp .25s ease;}

/* â”€â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:var(--forest);color:#fff;padding:12px 18px;border-radius:var(--rpill);font-size:14px;font-weight:500;z-index:999;box-shadow:var(--sh3);animation:slideUp .3s ease;white-space:nowrap;}

/* â”€â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero{background:linear-gradient(150deg,#122d1f 0%,#1a3d2b 50%,#2d6a4f 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:52px 20px 72px;text-align:center;position:relative;overflow:hidden;}
.hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 70% 30%,rgba(82,135,106,.25) 0%,transparent 60%);}

/* â”€â”€â”€ Search card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.scard{background:var(--white);border-radius:var(--r16);box-shadow:var(--shxl);padding:20px;width:calc(100% - 32px);max-width:720px;margin:-40px auto 0;position:relative;z-index:10;}

/* â”€â”€â”€ Filter pills â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.fpill{padding:8px 16px;border-radius:var(--rpill);border:1.5px solid var(--warm);font-size:13px;font-weight:600;background:var(--white);color:var(--mist);min-height:36px;white-space:nowrap;-webkit-tap-highlight-color:transparent;}
.fpill.on{background:var(--forest);border-color:var(--forest);color:#fff;}
.fpill:active:not(.on){background:var(--linen);}

/* â”€â”€â”€ Sticky bottom bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.stickybar{position:fixed;bottom:0;left:0;right:0;background:var(--white);border-top:1.5px solid var(--linen);padding:12px 16px env(safe-area-inset-bottom, 0px);z-index:50;box-shadow:0 -4px 20px rgba(0,0,0,.08);display:none;}

/* â”€â”€â”€ Animations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes spin{to{transform:rotate(360deg)}}
.anim{animation:slideUp .35s cubic-bezier(.25,.8,.25,1) both;}
.spinner{width:18px;height:18px;border:2.5px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;flex-shrink:0;}

/* â”€â”€â”€ Print â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media print{.noprint{display:none!important;}.topbar{position:relative;}}

/* â”€â”€â”€ DESKTOP hover effects â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(hover:hover){
  .btn-forest:hover:not(:disabled){background:#122d1f;box-shadow:0 4px 16px rgba(26,61,43,.3);transform:translateY(-1px);}
  .btn-gold:hover:not(:disabled){background:#b07e30;box-shadow:0 4px 16px rgba(200,145,60,.3);transform:translateY(-1px);}
  .btn-sage:hover:not(:disabled){background:#3d6b52;transform:translateY(-1px);}
  .btn-red:hover:not(:disabled){background:#9e2a2a;transform:translateY(-1px);}
  .btn-outline:hover:not(:disabled){background:var(--forest);color:#fff;}
  .btn-ghost:hover:not(:disabled){background:var(--linen);color:var(--ink);}
  .rcard:hover:not(.booked){box-shadow:var(--sh3);transform:translateY(-2px);}
  .fpill:hover:not(.on){background:var(--linen);border-color:var(--stone);}
  .popt:hover{border-color:var(--sage);background:#f7fbf9;}
  .brow:hover{box-shadow:var(--sh2);}
}

/* â”€â”€â”€ MOBILE â€” base overrides â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:640px){
  .topbar{height:52px;}
  .modal{border-radius:20px 20px 0 0;padding:22px 16px 32px;}
  .toast{bottom:72px;}
  .hero{padding:44px 16px 64px;}
  .scard{width:calc(100% - 24px);padding:16px;}
  .stickybar{display:flex;align-items:center;gap:10px;}
  /* Hide step labels on tiny screens except active */
  .slabel{display:none;}
  .slabel.active{display:inline;}
}

/* â”€â”€â”€ MOBILE â€” grid collapses â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:640px){
  .grid2{grid-template-columns:1fr!important;}
  .bkgrid{grid-template-columns:1fr!important;}
}

/* â”€â”€â”€ Room grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.rgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;}
@media(max-width:640px){.rgrid{grid-template-columns:1fr;gap:12px;}}

/* â”€â”€â”€ Admin stats grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;}
@media(max-width:480px){.sgrid{grid-template-columns:1fr 1fr;}}

/* â”€â”€â”€ Booking form layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.bkgrid{display:grid;grid-template-columns:1fr 280px;gap:20px;align-items:start;}
@media(max-width:700px){.bkgrid{grid-template-columns:1fr;}}

/* â”€â”€â”€ Date fields side by side on mobile â”€â”€â”€ */
.date2{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
@media(max-width:360px){.date2{grid-template-columns:1fr;}}

/* â”€â”€â”€ Phone+email side by side â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pe2{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
@media(max-width:480px){.pe2{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div id="root"></div>

<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel" data-presets="react">
const {useState,useEffect,useRef,useCallback}=React;

/* â”â”â”â” CONFIG â€” Edit this for your property â”â”â”â” */
const C={
  name:       "La Fleur Transient Inn",
  tagline:    "A peaceful retreat in the heart of the city",
  address:    "123 Bloom Street, Quezon City",
  phone:      "0917-123-4567",
  fb:         "fb.com/lafleurinn",
  checkIn:    "2:00 PM",
  checkOut:   "12:00 PM",
  dpRate:     0.5,
  adminPin:   "1234",        // â† CHANGE THIS!
  gcashName:  "Maria Santos",
  gcashNum:   "0917-123-4567",
  mayaNum:    "0917-123-4567",
  bankName:   "BDO",
  bankAcct:   "1234-5678-90",
  bankHolder: "Maria Santos",
};

/* â”â”â”â” ROOMS â”â”â”â” */
const ROOMS=[
  {id:"rm1",      name:"Room 1",      type:"Standard",price:500, cap:2,beds:"1 Double Bed",      grad:"linear-gradient(135deg,#c8dfd2,#8fbfa6)",desc:"Quiet garden-facing room with natural ventilation and warm bedside lighting."},
  {id:"rm2",      name:"Room 2",      type:"Standard",price:500, cap:2,beds:"1 Double Bed",      grad:"linear-gradient(135deg,#c2d8cc,#85b49a)",desc:"Comfortable room with city glimpse and blackout curtains for restful sleep."},
  {id:"rm3",      name:"Room 3",      type:"Standard",price:550, cap:3,beds:"1 Dbl + 1 Single", grad:"linear-gradient(135deg,#cce3d4,#8dbba4)",desc:"Slightly larger with an extra single bed â€” ideal for a small group."},
  {id:"rm4",      name:"Room 4",      type:"Standard",price:550, cap:3,beds:"1 Dbl + 1 Single", grad:"linear-gradient(135deg,#c6dece,#88b69e)",desc:"Peaceful courtyard-facing room with good cross-ventilation and ample storage."},
  {id:"rm5",      name:"Room 5",      type:"Standard",price:600, cap:4,beds:"2 Double Beds",    grad:"linear-gradient(135deg,#bbd8c7,#80b098)",desc:"Our largest standard room with two beds and a private reading corner."},
  {id:"attic",    name:"Attic Room",  type:"Loft",    price:750, cap:4,beds:"2 Beds + Loft",    grad:"linear-gradient(135deg,#e2d0bc,#c4a47e)",desc:"Charming loft with exposed wooden beams, skylights, and an upper sleeping area."},
  {id:"2nd-flr",  name:"2nd Floor",  type:"Suite",   price:1200,cap:6,beds:"Multiple Beds",     grad:"linear-gradient(135deg,#b8cde8,#7aa8d4)",desc:"Exclusive full-floor suite â€” sala and multiple rooms, perfect for families."},
  {id:"1st-flr",  name:"1st Floor",  type:"Suite",   price:1100,cap:6,beds:"Multiple Beds",     grad:"linear-gradient(135deg,#bccfe6,#7ea6d0)",desc:"Private first-floor suite with direct terrace access and shared living area."},
  {id:"magne",    name:"Magne",       type:"Themed",  price:800, cap:2,beds:"1 King Bed",        grad:"linear-gradient(135deg,#d0bedd,#a880c4)",desc:"Deep jewel tones, moody ambient lighting, and romantic dÃ©cor."},
  {id:"sunflower",name:"Sunflower",   type:"Themed",  price:750, cap:2,beds:"1 Queen Bed",       grad:"linear-gradient(135deg,#f0dfa0,#e0c44e)",desc:"Warm golden walls and floral accents full of brightness and cheer."},
  {id:"cherry",   name:"Cherry",      type:"Themed",  price:750, cap:2,beds:"1 Queen Bed",       grad:"linear-gradient(135deg,#f0c8c8,#e08888)",desc:"Soft blush palette with cherry blossom artwork and romantic details."},
  {id:"sampaguita",name:"Sampaguita",type:"Themed",   price:700, cap:2,beds:"1 Queen Bed",       grad:"linear-gradient(135deg,#ddeede,#a4cca6)",desc:"Crisp whites and fresh greens inspired by the Philippine national flower."},
  {id:"lily",     name:"Lily",        type:"Themed",  price:700, cap:2,beds:"1 Queen Bed",       grad:"linear-gradient(135deg,#e0d8f0,#b8a8e4)",desc:"Serene ivory and soft lavender with elegant lily motifs throughout."},
  {id:"charrie",  name:"Charrie",     type:"Themed",  price:800, cap:3,beds:"1 Dbl + 1 Single", grad:"linear-gradient(135deg,#e8d4b8,#c8a07a)",desc:"Rustic earthy palette with wicker accents and warm cottage feeling."},
];

const TC={
  Standard:{fg:"#1a5e36",bg:"#e8f7ee",bd:"#a3d4b0"},
  Loft:    {fg:"#7c4a00",bg:"#fef3e2",bd:"#e4c07a"},
  Suite:   {fg:"#1a3a8a",bg:"#dbeafe",bd:"#93c5fd"},
  Themed:  {fg:"#5c2d8a",bg:"#f5e8ff",bd:"#c4a0e8"},
};

const ST={
  pending_verification:{label:"Pending",    dot:"#e6a817",bg:"#fef8e7",fg:"#8a5f00",bl:"#f0c040"},
  approved:            {label:"Approved",   dot:"#2d9e5f",bg:"#e8f7ee",fg:"#1a5e36",bl:"#2d9e5f"},
  rejected:            {label:"Rejected",   dot:"#c0392b",bg:"#fde8e8",fg:"#8a1515",bl:"#c0392b"},
  checked_in:          {label:"Checked In", dot:"#1d4ed8",bg:"#dbeafe",fg:"#1a3a8a",bl:"#1d4ed8"},
  checked_out:         {label:"Completed",  dot:"#6b7280",bg:"#f3f4f6",fg:"#374151",bl:"#a0a0a0"},
};

/* â”â”â”â” UTILS â”â”â”â” */
const peso   = n=>`â‚±${Number(n||0).toLocaleString("en-PH")}`;
const today  = ()=>new Date().toISOString().split("T")[0];
const fmtD   = d=>d?new Date(d).toLocaleDateString("en-PH",{weekday:"short",month:"long",day:"numeric",year:"numeric"}):"â€”";
const fmtS   = d=>d?new Date(d).toLocaleDateString("en-PH",{month:"short",day:"numeric",year:"numeric"}):"â€”";
const fmtDT  = d=>d?new Date(d).toLocaleString("en-PH",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”";
const nts    = (a,b)=>{if(!a||!b)return 0;const n=Math.round((new Date(b)-new Date(a))/86400000);return n>0?n:0;};
const genRef = ()=>"LF"+Date.now().toString(36).toUpperCase().slice(-5)+Math.random().toString(36).slice(2,4).toUpperCase();
const lap    = (a1,a2,b1,b2)=>new Date(a1)<new Date(b2)&&new Date(a2)>new Date(b1);
const ACTIVE = ["pending_verification","approved","checked_in"];
const isAvail= (rid,ci,co,bks,skip=null)=>!bks.some(b=>b.roomId===rid&&b.ref!==skip&&ACTIVE.includes(b.status)&&lap(ci,co,b.checkIn,b.checkOut));

/* â”â”â”â” STORAGE â”â”â”â” */
const DB={
  load:()=>{try{return JSON.parse(localStorage.getItem("lafleur_v1")||"[]")}catch{return[]}},
  save:d=>{try{localStorage.setItem("lafleur_v1",JSON.stringify(d))}catch{}},
};

/* â”â”â”â” SMALL COMPONENTS â”â”â”â” */
function Toast({msg,onHide}){
  useEffect(()=>{if(msg){const t=setTimeout(onHide,2600);return()=>clearTimeout(t);}},[msg]);
  if(!msg)return null;
  return <div className="toast noprint">âœ“ {msg}</div>;
}

function SBadge({s}){
  const x=ST[s]||ST.pending_verification;
  return <span className="badge" style={{background:x.bg,color:x.fg}}><span className="dot" style={{background:x.dot}}/>{x.label}</span>;
}

function TBadge({type}){
  const t=TC[type]||{fg:"#333",bg:"#eee",bd:"#ccc"};
  return <span className="badge" style={{background:t.bg,color:t.fg,border:`1px solid ${t.bd}`,fontSize:11}}>{type}</span>;
}

function StepBar({step}){
  const steps=["Browse","Details","Payment","Confirmed"];
  return(
    <div className="steps">
      {steps.map((s,i)=>{
        const done=i<step,active=i===step;
        return(
          <React.Fragment key={i}>
            <div className="snode">
              <div className="scircle" style={{background:done?"var(--green)":active?"var(--forest)":"var(--warm)",color:done||active?"#fff":"var(--stone)"}}>{done?"âœ“":i+1}</div>
              <span className={`slabel${active?" active":""}`} style={{fontSize:12,fontWeight:active?600:400,color:active?"var(--forest)":done?"var(--green)":"var(--stone)"}}>{s}</span>
            </div>
            {i<steps.length-1&&<div className="sline" style={{background:done?"var(--green)":"var(--warm)"}}/>}
          </React.Fragment>
        );
      })}
    </div>
  );
}

function Bar({onAdmin,back,backLabel="â† Back",title,showAdmin=false}){
  return(
    <div className="topbar noprint">
      <div style={{display:"flex",alignItems:"center",gap:10}}>
        {back&&<button className="btn btn-wg btn-sm" onClick={back}>{backLabel}</button>}
        {!back&&<div style={{width:34,height:34,background:"rgba(255,255,255,.1)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:17}}>ğŸŒ¿</div>}
        <span className="serif" style={{color:"#fff",fontSize:17,fontWeight:600}}>{title||C.name}</span>
      </div>
      {showAdmin&&onAdmin&&<button className="btn btn-wg btn-sm" onClick={onAdmin}>âš™ Admin</button>}
    </div>
  );
}

/* â”â”â”â” ADMIN LOGIN â”â”â”â” */
function AdminLogin({onOk,onBack}){
  const [pin,setPin]=useState(""), [err,setErr]=useState(""), [shake,setShake]=useState(false);
  const ref=useRef();
  useEffect(()=>ref.current?.focus(),[]);
  function go(){
    if(pin===C.adminPin){onOk();}
    else{setErr("Incorrect PIN. Try again.");setPin("");setShake(true);setTimeout(()=>setShake(false),400);}
  }
  return(
    <div style={{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--ivory)",padding:20}}>
      <div className="card anim" style={{width:"100%",maxWidth:340,padding:"36px 28px",textAlign:"center",borderRadius:20}}>
        <div style={{width:54,height:54,background:"var(--forest)",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",fontSize:24}}>ğŸ”</div>
        <h2 className="serif" style={{fontSize:28,fontWeight:600,marginBottom:4}}>Admin Access</h2>
        <p style={{color:"var(--mist)",fontSize:14,marginBottom:24}}>{C.name}</p>
        <div className="field" style={{marginBottom:14}}>
          <label className="lbl" style={{textAlign:"left"}}>PIN</label>
          <input ref={ref} className={`inp ${err?"err":""}`} type="password" inputMode="numeric" maxLength={8}
            placeholder="Enter PIN" value={pin}
            style={{textAlign:"center",fontSize:22,letterSpacing:10,transition:"transform .1s",transform:shake?"translateX(-5px)":"none"}}
            onChange={e=>{setPin(e.target.value);setErr("");}} onKeyDown={e=>e.key==="Enter"&&go()}/>
          {err&&<span className="err-msg">{err}</span>}
        </div>
        <button className="btn btn-forest btn-lg" style={{width:"100%",marginBottom:10}} onClick={go}>Sign In â†’</button>
        <button className="btn btn-ghost" style={{width:"100%"}} onClick={onBack}>â† Back to Booking</button>
        <p style={{marginTop:18,fontSize:11,color:"var(--stone)"}}>Default PIN: <strong>1234</strong> Â· Change <code>adminPin</code> in CONFIG</p>
      </div>
    </div>
  );
}

/* â”â”â”â” ADMIN DASHBOARD â”â”â”â” */
function AdminDash({bookings,onUpdate,onDelete,onLogout}){
  const [tab,setTab]=useState("all");
  const [q,setQ]=useState("");
  const [sel,setSel]=useState(null);
  const [note,setNote]=useState("");
  const [toast,setToast]=useState("");
  const [copied,setCopied]=useState(false);

  function copy(txt){navigator.clipboard.writeText(txt).then(()=>{setCopied(true);setTimeout(()=>setCopied(false),2000);setToast("Copied!");});}

  const cnt={
    all:bookings.length,
    pending_verification:bookings.filter(b=>b.status==="pending_verification").length,
    approved:bookings.filter(b=>b.status==="approved").length,
    checked_in:bookings.filter(b=>b.status==="checked_in").length,
    checked_out:bookings.filter(b=>b.status==="checked_out").length,
    rejected:bookings.filter(b=>b.status==="rejected").length,
  };

  const dpRev=bookings.filter(b=>["approved","checked_in","checked_out"].includes(b.status)).reduce((s,b)=>s+(b.downpayment||0),0);

  const list=bookings.filter(b=>{
    const tOk=tab==="all"||b.status===tab;
    const sq=q.toLowerCase();
    const sOk=!sq||b.ref.toLowerCase().includes(sq)||b.guestName.toLowerCase().includes(sq)||(b.roomName||"").toLowerCase().includes(sq)||(b.guestPhone||"").includes(sq);
    return tOk&&sOk;
  }).sort((a,b)=>{
    if(a.status==="pending_verification"&&b.status!=="pending_verification")return -1;
    if(b.status==="pending_verification"&&a.status!=="pending_verification")return 1;
    return new Date(b.createdAt)-new Date(a.createdAt);
  });

  function act(ref,status,adminNote){
    const b=bookings.find(x=>x.ref===ref);
    onUpdate({...b,status,adminNote:adminNote||undefined,updatedAt:new Date().toISOString()});
    setSel(null);setNote("");
    const m={approved:"Booking approved âœ“",rejected:"Booking rejected",checked_in:"Marked as checked in ğŸ”‘",checked_out:"Marked as checked out ğŸ"};
    setToast(m[status]||"Updated");
  }

  const confirm=b=>`Hi ${b.guestName}! ğŸŒ¿\n\nYour reservation at ${C.name} is CONFIRMED! âœ…\n\nğŸ“‹ Ref No.: ${b.ref}\nğŸ›  Room: ${b.roomName}\nğŸ“… Check-In: ${fmtD(b.checkIn)} at ${C.checkIn}\nğŸ“… Check-Out: ${fmtD(b.checkOut)} at ${C.checkOut}\nğŸ‘¥ Guests: ${b.guestGuests} person(s)\n\nğŸ’³ Downpayment received: ${peso(b.downpayment)}\nğŸ’° Balance on arrival: ${peso(b.total-b.downpayment)}\n\nPlease show this message or your ref no. upon check-in.\nContact us at ${C.phone}.\n\nSee you soon! ğŸ¡\nâ€” ${C.name}`;
  const reject=b=>`Hi ${b.guestName},\n\nWe regret that your booking (Ref: ${b.ref}) could not be confirmed.${b.adminNote?"\n\nReason: "+b.adminNote:""}\n\nPlease contact us at ${C.phone} or Facebook to rebook.\n\nSorry for the inconvenience.\nâ€” ${C.name}`;
  const checkin=b=>`Hi ${b.guestName}! ğŸ”‘\n\nWelcome to ${C.name}!\n\nğŸ“‹ Ref: ${b.ref} Â· Room: ${b.roomName}\nğŸ“… Check-Out: ${fmtD(b.checkOut)} at ${C.checkOut}\nğŸ’° Balance Due: ${peso(b.total-b.downpayment)}\n\nEnjoy your stay! ğŸ˜Š\nâ€” ${C.name} Â· ${C.phone}`;

  const TABS=[
    {id:"all",label:`All (${cnt.all})`},
    {id:"pending_verification",label:`â³ Pending (${cnt.pending_verification})`},
    {id:"approved",label:`âœ… Approved (${cnt.approved})`},
    {id:"checked_in",label:`ğŸ”‘ In (${cnt.checked_in})`},
    {id:"checked_out",label:`ğŸ Out (${cnt.checked_out})`},
    {id:"rejected",label:`âœ• Rejected (${cnt.rejected})`},
  ];

  return(
    <div style={{minHeight:"100vh",background:"#f0ece4"}}>
      <Toast msg={toast} onHide={()=>setToast("")}/>
      <div className="topbar">
        <div style={{display:"flex",alignItems:"center",gap:12}}>
          <span style={{fontSize:20}}>ğŸ¨</span>
          <div>
            <div className="serif" style={{color:"#fff",fontSize:17,fontWeight:600}}>{C.name}</div>
            <div style={{color:"rgba(255,255,255,.4)",fontSize:10,letterSpacing:"0.06em"}}>ADMIN PANEL</div>
          </div>
        </div>
        <div style={{display:"flex",gap:8,alignItems:"center"}}>
          {cnt.pending_verification>0&&<span className="badge" style={{background:"#fef3c7",color:"#92400e"}}>â³ {cnt.pending_verification}</span>}
          <button className="btn btn-wg btn-sm" onClick={onLogout}>Log Out</button>
        </div>
      </div>

      <div style={{maxWidth:1000,margin:"0 auto",padding:"20px 14px"}}>
        {/* Stats */}
        <div className="sgrid" style={{marginBottom:20}}>
          {[
            {label:"Total",val:cnt.all,color:"var(--forest)"},
            {label:"Pending",val:cnt.pending_verification,color:"#92400e"},
            {label:"Approved",val:cnt.approved+cnt.checked_in,color:"var(--green)"},
            {label:"DP Collected",val:peso(dpRev),color:"var(--gold)"},
          ].map(s=>(
            <div key={s.label} style={{background:"var(--white)",borderRadius:10,padding:"14px 16px",boxShadow:"var(--sh1)"}}>
              <div style={{fontSize:11,color:"var(--stone)",textTransform:"uppercase",letterSpacing:".05em",marginBottom:4}}>{s.label}</div>
              <div className="serif" style={{fontSize:22,fontWeight:600,color:s.color}}>{s.val}</div>
            </div>
          ))}
        </div>

        {/* Search */}
        <input className="inp" style={{marginBottom:14,background:"var(--white)"}}
          placeholder="ğŸ”  Search name, ref, room, phoneâ€¦" value={q} onChange={e=>setQ(e.target.value)}/>

        {/* Tabs */}
        <div className="atabs">
          {TABS.map(t=><button key={t.id} className={`atab ${tab===t.id?"on":""}`} onClick={()=>setTab(t.id)}>{t.label}</button>)}
        </div>

        {/* List */}
        {list.length===0
          ?<div style={{textAlign:"center",padding:"48px 0",color:"var(--mist)"}}>
              <div style={{fontSize:36,marginBottom:10}}>ğŸ“‹</div>
              <p style={{fontSize:15}}>No bookings found.</p>
            </div>
          :<div style={{display:"flex",flexDirection:"column",gap:8}}>
              {list.map(b=>{
                const s=ST[b.status];
                return(
                  <div key={b.ref} className="brow" style={{borderLeftColor:s.bl}}
                    onClick={()=>{setSel(b);setNote(b.adminNote||"");}}>
                    <div style={{flex:1,minWidth:0}}>
                      <div style={{fontWeight:700,fontSize:15,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}>{b.guestName}</div>
                      <div style={{fontSize:12,color:"var(--mist)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}>{b.roomName} Â· {fmtS(b.checkIn)} â†’ {fmtS(b.checkOut)}</div>
                    </div>
                    <div style={{textAlign:"right",flexShrink:0}}>
                      <div style={{fontWeight:700,fontSize:14,color:"var(--green)"}}>{peso(b.downpayment)}</div>
                      <code style={{fontSize:11,color:"var(--stone)",letterSpacing:".04em"}}>{b.ref}</code>
                    </div>
                    <SBadge s={b.status}/>
                    {b.status==="pending_verification"&&(
                      <div style={{display:"flex",gap:6,flexShrink:0}} onClick={e=>e.stopPropagation()}>
                        <button className="btn btn-sage btn-xs" onClick={()=>act(b.ref,"approved","")}>âœ…</button>
                        <button className="btn btn-red btn-xs" onClick={()=>act(b.ref,"rejected","")}>âœ•</button>
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
        }
      </div>

      {/* Modal */}
      {sel&&(
        <div className="overlay" onClick={()=>{setSel(null);setNote("");}}>
          <div className="modal" onClick={e=>e.stopPropagation()} style={{maxWidth:520}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16}}>
              <div>
                <h3 className="serif" style={{fontSize:22,fontWeight:600,marginBottom:3}}>Booking Detail</h3>
                <code style={{fontSize:13,fontWeight:700,color:"var(--forest)",letterSpacing:".06em"}}>{sel.ref}</code>
              </div>
              <button className="btn btn-ghost btn-sm" onClick={()=>{setSel(null);setNote("");}}>âœ•</button>
            </div>
            <SBadge s={sel.status}/>
            {sel.updatedAt&&<span style={{fontSize:11,color:"var(--mist)",marginLeft:8}}>Updated {fmtDT(sel.updatedAt)}</span>}

            <div style={{background:"var(--ivory)",borderRadius:10,padding:"12px 14px",margin:"14px 0"}}>
              {[
                ["Room",sel.roomName],["Type",sel.roomType],
                ["Guest",sel.guestName],["Phone",sel.guestPhone],["Email",sel.guestEmail||"â€”"],
                ["Guests",`${sel.guestGuests} person(s)`],
                ["Check-In",`${fmtD(sel.checkIn)} Â· ${C.checkIn}`],
                ["Check-Out",`${fmtD(sel.checkOut)} Â· ${C.checkOut}`],
                ["Nights",`${nts(sel.checkIn,sel.checkOut)}`],
                ["Total",peso(sel.total)],
                ["Downpayment",peso(sel.downpayment)],
                ["Balance",peso(sel.total-sel.downpayment)],
                ["Pay via",(sel.payMethod||"").toUpperCase()],
                ["Requests",sel.guestNotes||"None"],
                ["Booked",fmtDT(sel.createdAt)],
              ].map(([k,v])=>(
                <div key={k} className="irow">
                  <span style={{color:"var(--mist)",fontSize:13,flexShrink:0,marginRight:8}}>{k}</span>
                  <span style={{fontWeight:500,fontSize:13,textAlign:"right",wordBreak:"break-word"}}>{v}</span>
                </div>
              ))}
            </div>

            {sel.adminNote&&<div style={{background:"var(--yellow-pale)",border:"1px solid var(--yellow-b)",borderRadius:8,padding:"10px 12px",marginBottom:12,fontSize:13,color:"#7a5c00"}}><strong>Admin Note:</strong> {sel.adminNote}</div>}

            {/* Copy-ready messages */}
            {sel.status==="approved"&&<CopyMsg label="ğŸ“± Confirmation Message" bg="#e8f4ec" bd="var(--mint)" fc="var(--green)" txt={confirm(sel)} onCopy={()=>copy(confirm(sel))} copied={copied}/>}
            {sel.status==="checked_in"&&<CopyMsg label="ğŸ“± Check-In Message" bg="var(--blue-pale)" bd="#93c5fd" fc="var(--blue,#1d4ed8)" txt={checkin(sel)} onCopy={()=>copy(checkin(sel))} copied={copied}/>}
            {sel.status==="rejected"&&<CopyMsg label="ğŸ“± Rejection Message" bg="var(--red-pale)" bd="#fca5a5" fc="var(--red)" txt={reject(sel)} onCopy={()=>copy(reject(sel))} copied={copied}/>}

            {["pending_verification","approved"].includes(sel.status)&&(
              <div className="field" style={{marginBottom:14}}>
                <label className="lbl">Admin Note Â· optional</label>
                <input className="inp" placeholder="e.g. GCash verified Â· screenshot ref #1234" value={note} onChange={e=>setNote(e.target.value)}/>
              </div>
            )}

            <div style={{display:"flex",gap:10,flexWrap:"wrap"}}>
              {sel.status==="pending_verification"&&<>
                <button className="btn btn-sage" style={{flex:1}} onClick={()=>act(sel.ref,"approved",note)}>âœ… Approve</button>
                <button className="btn btn-red" style={{flex:1}} onClick={()=>act(sel.ref,"rejected",note)}>Reject</button>
              </>}
              {sel.status==="approved"&&<button className="btn btn-forest" style={{flex:1}} onClick={()=>act(sel.ref,"checked_in",note)}>ğŸ”‘ Mark Checked In</button>}
              {sel.status==="checked_in"&&<button className="btn btn-ghost" style={{flex:1}} onClick={()=>act(sel.ref,"checked_out",note)}>ğŸ Mark Checked Out</button>}
              {["rejected","checked_out"].includes(sel.status)&&<button className="btn btn-red btn-sm" onClick={()=>{onDelete(sel.ref);setSel(null);setToast("Deleted");}}>ğŸ—‘ Delete</button>}
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

function CopyMsg({label,bg,bd,fc,txt,onCopy,copied}){
  return(
    <div style={{background:bg,border:`1.5px solid ${bd}`,borderRadius:10,padding:14,marginBottom:14}}>
      <div style={{fontSize:11,fontWeight:700,color:fc,textTransform:"uppercase",letterSpacing:".07em",marginBottom:8}}>{label}</div>
      <pre style={{fontFamily:"monospace",fontSize:12,lineHeight:1.85,whiteSpace:"pre-wrap",color:"var(--ink)",background:"var(--white)",borderRadius:7,padding:"10px 12px",border:`1px solid ${bd}`,marginBottom:10,wordBreak:"break-word"}}>{txt}</pre>
      <button className="btn btn-sm" style={{background:fc,color:"#fff",border:"none"}} onClick={onCopy}>{copied?"âœ“ Copied!":"ğŸ“‹ Copy Message"}</button>
    </div>
  );
}

/* â”â”â”â” GUEST HOME â”â”â”â” */
function Home({bookings,onBook,onAdmin}){
  const [filter,setFilter]=useState("All");
  const [ci,setCI]=useState(""), [co,setCO]=useState("");
  const [searched,setSearched]=useState(false);
  const td=today();
  const types=["All",...Array.from(new Set(ROOMS.map(r=>r.type)))];
  const rooms=ROOMS.filter(r=>(filter==="All"||r.type===filter)&&(!searched||isAvail(r.id,ci,co,bookings)));
  const bookedIds=new Set(searched&&ci&&co?ROOMS.filter(r=>!isAvail(r.id,ci,co,bookings)).map(r=>r.id):[]);
  const n=nts(ci,co);

  function search(){
    if(!ci){alert("Please select a check-in date.");return;}
    if(!co){alert("Please select a check-out date.");return;}
    if(co<=ci){alert("Check-out must be after check-in.");return;}
    setSearched(true);
  }

  return(
    <div style={{minHeight:"100vh"}}>
      {/* Hero */}
      <div className="hero">
        <button className="btn btn-wg btn-sm noprint" style={{position:"absolute",top:14,right:14}} onClick={onAdmin}>âš™ Admin</button>
        <div style={{maxWidth:600,position:"relative",zIndex:1}}>
          <div style={{display:"inline-flex",alignItems:"center",gap:7,background:"rgba(255,255,255,.1)",border:"1px solid rgba(255,255,255,.15)",borderRadius:99,padding:"5px 14px",marginBottom:18}}>
            <span style={{color:"var(--mint)",fontSize:12,letterSpacing:".1em",fontWeight:600,textTransform:"uppercase"}}>Book Instantly Â· No Login</span>
          </div>
          <h1 className="serif" style={{color:"#fff",fontSize:"clamp(30px,7vw,52px)",fontWeight:600,lineHeight:1.1,marginBottom:12}}>{C.name}</h1>
          <p style={{color:"rgba(255,255,255,.6)",fontSize:"clamp(13px,3.5vw,16px)",lineHeight:1.65,marginBottom:6}}>{C.tagline}</p>
          <p style={{color:"rgba(255,255,255,.45)",fontSize:13}}>ğŸ“ {C.address}</p>
        </div>
      </div>

      {/* Search card */}
      <div style={{padding:"0 12px"}}>
        <div className="scard">
          <div className="lbl" style={{marginBottom:14}}>Check Availability</div>
          <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginBottom:10}} className="date2">
            <div className="field">
              <label className="lbl">Check-In</label>
              <input type="date" className="inp" min={td} value={ci} onChange={e=>{setCI(e.target.value);setSearched(false);}}/>
            </div>
            <div className="field">
              <label className="lbl">Check-Out</label>
              <input type="date" className="inp" min={ci||td} value={co} onChange={e=>{setCO(e.target.value);setSearched(false);}}/>
            </div>
          </div>
          <div style={{display:"flex",gap:8}}>
            <button className="btn btn-forest" style={{flex:1}} onClick={search}>Search Rooms</button>
            {searched&&<button className="btn btn-ghost btn-sm" onClick={()=>{setCI("");setCO("");setSearched(false);}}>Clear</button>}
          </div>
          {searched&&ci&&co&&(
            <div style={{marginTop:10,padding:"9px 12px",background:"var(--mint-pale)",borderRadius:8,fontSize:13,color:"var(--green)",fontWeight:500}}>
              âœ“ <strong>{rooms.filter(r=>!bookedIds.has(r.id)).length}</strong> available room{rooms.filter(r=>!bookedIds.has(r.id)).length!==1?"s":""} Â· {fmtS(ci)} â†’ {fmtS(co)} Â· {n} night{n!==1?"s":""}
            </div>
          )}
        </div>
      </div>

      {/* Rooms */}
      <div style={{maxWidth:1100,margin:"0 auto",padding:"32px 14px 100px"}}>
        {/* Header + filters */}
        <div style={{marginBottom:18}}>
          <h2 className="serif" style={{fontSize:26,fontWeight:600,marginBottom:4}}>Rooms &amp; Suites</h2>
          <p style={{fontSize:13,color:"var(--mist)",marginBottom:14}}>{ROOMS.length} room types Â· All with private bathroom</p>
          <div style={{display:"flex",gap:8,flexWrap:"nowrap",overflowX:"auto",paddingBottom:4,WebkitOverflowScrolling:"touch"}}>
            {types.map(t=><button key={t} className={`fpill ${filter===t?"on":""}`} onClick={()=>setFilter(t)}>{t}</button>)}
          </div>
        </div>

        <div className="rgrid">
          {rooms.map((r,idx)=>{
            const booked=bookedIds.has(r.id);
            return(
              <div key={r.id} className={`rcard ${booked?"booked":""}`} style={{animationDelay:`${idx*.03}s`}}
                onClick={()=>!booked&&onBook(r,ci,co,searched)}>
                <div style={{height:140,background:r.grad,position:"relative",display:"flex",alignItems:"flex-end",padding:"10px 12px"}}>
                  {booked&&<div style={{position:"absolute",top:10,right:10,background:"var(--red)",color:"#fff",fontSize:11,fontWeight:700,padding:"3px 9px",borderRadius:5}}>BOOKED</div>}
                  <TBadge type={r.type}/>
                </div>
                <div style={{padding:"14px 16px"}}>
                  <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:5}}>
                    <h3 className="serif" style={{fontSize:19,fontWeight:600,color:"var(--forest)"}}>{r.name}</h3>
                    <div style={{textAlign:"right",flexShrink:0,marginLeft:8}}>
                      <span className="serif" style={{fontSize:20,fontWeight:700,color:"var(--green)"}}>{peso(r.price)}</span>
                      <span style={{fontSize:12,color:"var(--mist)"}}>/night</span>
                    </div>
                  </div>
                  <div style={{display:"flex",gap:10,fontSize:12,color:"var(--stone)",marginBottom:9}}>
                    <span>ğŸ‘¥ Max {r.cap}</span>
                    <span>ğŸ› {r.beds}</span>
                  </div>
                  <p style={{fontSize:13,color:"var(--mist)",lineHeight:1.6,marginBottom:12}}>{r.desc}</p>
                  {searched&&!booked&&n>0&&(
                    <div style={{background:"var(--mint-pale)",borderRadius:7,padding:"7px 10px",fontSize:13,color:"var(--green)",fontWeight:600,marginBottom:10}}>
                      {n}N Â· Total {peso(r.price*n)} Â· DP {peso(Math.ceil(r.price*n*C.dpRate))}
                    </div>
                  )}
                  <button className="btn btn-forest" style={{width:"100%"}} disabled={booked}>
                    {booked?"Not Available":"Reserve This Room â†’"}
                  </button>
                </div>
              </div>
            );
          })}
        </div>

        {/* How it works */}
        <div style={{marginTop:36,background:"var(--white)",borderRadius:14,border:"1.5px solid var(--linen)",padding:"20px"}}>
          <div style={{fontWeight:700,fontSize:15,marginBottom:10,color:"var(--forest)"}}>â„¹ï¸ How Booking Works</div>
          <ol style={{fontSize:14,color:"var(--bark)",lineHeight:2.1,paddingLeft:18}}>
            <li>Pick your room and select check-in / check-out dates.</li>
            <li>Enter your name, phone, and number of guests.</li>
            <li>Pay <strong>50% downpayment</strong> via GCash, Maya, or bank transfer.</li>
            <li>Get your <strong>booking reference</strong> instantly.</li>
            <li>Send payment screenshot + reference to <strong>{C.phone}</strong>.</li>
            <li>We verify and send a <strong>confirmation</strong> within 1â€“2 hours.</li>
          </ol>
        </div>

        {/* Footer */}
        <div style={{marginTop:20,display:"flex",gap:12,flexWrap:"wrap",fontSize:13,color:"var(--stone)",justifyContent:"center",textAlign:"center"}}>
          <span>ğŸ“ {C.address}</span>
          <span>ğŸ“ {C.phone}</span>
          <span>ğŸ“˜ {C.fb}</span>
          <span>ğŸ• Check-in {C.checkIn} Â· Check-out {C.checkOut}</span>
        </div>
      </div>
    </div>
  );
}

/* â”â”â”â” BOOKING FORM â”â”â”â” */
function BookForm({room,initCI,initCO,bookings,onBack,onNext}){
  const td=today();
  const [ci,setCI]=useState(initCI||""), [co,setCO]=useState(initCO||"");
  const [name,setName]=useState(""), [phone,setPhone]=useState(""), [email,setEmail]=useState("");
  const [guests,setGuests]=useState(1), [notes,setNotes]=useState("");
  const [errs,setErrs]=useState({}), [availErr,setAvailErr]=useState("");
  const n=nts(ci,co), total=room.price*n, dp=Math.ceil(total*C.dpRate);

  function onBlur(k,val){
    const e={...errs};
    if(k==="name"){if(!val.trim())e.name="Required";else delete e.name;}
    if(k==="phone"){
      if(!val.trim())e.phone="Required";
      else if(!/^(\+63|0)\d{9,10}$/.test(val.replace(/[\s\-]/g,"")))e.phone="Enter valid PH number (09XXXXXXXXX)";
      else delete e.phone;
    }
    setErrs(e);
  }

  function validate(){
    const e={};
    if(!ci)e.ci="Select check-in date";
    if(!co)e.co="Select check-out date";
    else if(co<=ci)e.co="Must be after check-in";
    if(!n||n<1)e.co="Select valid dates";
    if(!name.trim())e.name="Required";
    if(!phone.trim())e.phone="Required";
    else if(!/^(\+63|0)\d{9,10}$/.test(phone.replace(/[\s\-]/g,"")))e.phone="Enter valid PH number (09XXXXXXXXX)";
    if(guests<1||guests>room.cap)e.guests=`1 to ${room.cap} guests`;
    setErrs(e);return Object.keys(e).length===0;
  }

  function submit(){
    if(!validate()){window.scrollTo(0,0);return;}
    if(!isAvail(room.id,ci,co,bookings)){
      setAvailErr("This room is no longer available for those dates. Please choose different dates.");
      window.scrollTo(0,0);return;
    }
    setAvailErr("");
    onNext({room,ci,co,n,total,dp,name,phone,email,guests,notes});
  }

  return(
    <div style={{minHeight:"100vh",background:"var(--ivory)",paddingBottom:80}}>
      <Bar back={onBack}/>
      <div style={{maxWidth:760,margin:"0 auto",padding:"20px 14px 0"}}>
        <StepBar step={1}/>
        {availErr&&<div style={{background:"var(--red-pale)",border:"1.5px solid #fca5a5",borderRadius:10,padding:"12px 14px",marginBottom:16,fontSize:14,color:"#8a1515"}}>âš ï¸ {availErr}</div>}

        <div className="bkgrid">
          {/* LEFT */}
          <div style={{display:"flex",flexDirection:"column",gap:16}}>
            <div>
              <h2 className="serif" style={{fontSize:26,fontWeight:600,marginBottom:3}}>Your Booking</h2>
              <p style={{color:"var(--mist)",fontSize:14}}>Reserving <strong style={{color:"var(--forest)"}}>{room.name}</strong></p>
            </div>

            {/* Dates */}
            <div className="panel">
              <div className="lbl" style={{marginBottom:12}}>Stay Dates</div>
              <div className="date2" style={{marginBottom:12}}>
                <div className="field">
                  <label className="lbl">Check-In *</label>
                  <input type="date" className={`inp ${errs.ci?"err":""}`} min={td} value={ci} onChange={e=>{setCI(e.target.value);setErrs(p=>({...p,ci:""}));}}/>
                  {errs.ci&&<span className="err-msg">{errs.ci}</span>}
                </div>
                <div className="field">
                  <label className="lbl">Check-Out *</label>
                  <input type="date" className={`inp ${errs.co?"err":""}`} min={ci||td} value={co} onChange={e=>{setCO(e.target.value);setErrs(p=>({...p,co:""}));}}/>
                  {errs.co&&<span className="err-msg">{errs.co}</span>}
                </div>
              </div>
              {n>0&&<div style={{background:"var(--mint-pale)",borderRadius:8,padding:"10px 12px",fontSize:14,color:"var(--green)",fontWeight:600}}>ğŸŒ™ {n} night{n>1?"s":""} Â· Total {peso(total)} Â· DP {peso(dp)}</div>}
            </div>

            {/* Guest info */}
            <div className="panel">
              <div className="lbl" style={{marginBottom:12}}>Guest Information</div>
              <div style={{display:"flex",flexDirection:"column",gap:14}}>
                <div className="field">
                  <label className="lbl">Full Name *</label>
                  <input className={`inp ${errs.name?"err":""}`} placeholder="e.g. Maria Dela Cruz" value={name} onChange={e=>setName(e.target.value)} onBlur={e=>onBlur("name",e.target.value)}/>
                  {errs.name&&<span className="err-msg">{errs.name}</span>}
                </div>
                <div className="pe2">
                  <div className="field">
                    <label className="lbl">Phone Number *</label>
                    <input className={`inp ${errs.phone?"err":""}`} placeholder="09XXXXXXXXX" type="tel" value={phone} onChange={e=>setPhone(e.target.value)} onBlur={e=>onBlur("phone",e.target.value)}/>
                    {errs.phone&&<span className="err-msg">{errs.phone}</span>}
                  </div>
                  <div className="field">
                    <label className="lbl">Email <span style={{fontWeight:400,textTransform:"none",letterSpacing:0,color:"var(--stone)"}}>Â· optional</span></label>
                    <input className="inp" placeholder="for receipt" type="email" value={email} onChange={e=>setEmail(e.target.value)}/>
                  </div>
                </div>
                <div className="field" style={{maxWidth:200}}>
                  <label className="lbl">Number of Guests *</label>
                  <select className={`inp ${errs.guests?"err":""}`} value={guests} onChange={e=>setGuests(Number(e.target.value))}>
                    {Array.from({length:room.cap},(_,i)=>i+1).map(x=><option key={x} value={x}>{x} {x===1?"Guest":"Guests"}</option>)}
                  </select>
                  {errs.guests&&<span className="err-msg">{errs.guests}</span>}
                </div>
                <div className="field">
                  <label className="lbl">Special Requests <span style={{fontWeight:400,textTransform:"none",letterSpacing:0,color:"var(--stone)"}}>Â· optional</span></label>
                  <textarea className="inp" placeholder="Any special arrangements or requestsâ€¦" value={notes} onChange={e=>setNotes(e.target.value)}/>
                </div>
              </div>
            </div>

            <button className="btn btn-forest btn-lg noprint" style={{width:"100%",justifyContent:"center"}} onClick={submit}>Continue to Payment â†’</button>
          </div>

          {/* RIGHT â€” room summary (hides on mobile via bkgrid collapse) */}
          <div style={{position:"sticky",top:64}}>
            <div className="card">
              <div style={{height:110,background:room.grad,display:"flex",alignItems:"flex-end",padding:"10px 14px"}}>
                <TBadge type={room.type}/>
              </div>
              <div style={{padding:"16px"}}>
                <h3 className="serif" style={{fontSize:19,fontWeight:600,marginBottom:3,color:"var(--forest)"}}>{room.name}</h3>
                <div style={{fontSize:12,color:"var(--stone)",marginBottom:8}}>ğŸ‘¥ Max {room.cap} Â· ğŸ› {room.beds}</div>
                <p style={{fontSize:12,color:"var(--mist)",lineHeight:1.6,marginBottom:12}}>{room.desc}</p>
                <div style={{borderTop:"1px solid var(--linen)",paddingTop:10}}>
                  {[
                    ["Rate",`${peso(room.price)}/night`],
                    n>0&&["Nights",`${n}`],
                    n>0&&["Total",peso(total)],
                    n>0&&["Downpayment (50%)",<strong style={{color:"var(--green)"}}>{peso(dp)}</strong>],
                    n>0&&["Balance on arrival",peso(total-dp)],
                  ].filter(Boolean).map(([k,v])=>(
                    <div key={k} className="irow" style={{fontSize:13}}>
                      <span style={{color:"var(--mist)"}}>{k}</span>
                      <span style={{fontWeight:500}}>{v}</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Sticky mobile bottom bar */}
      <div className="stickybar noprint">
        <div style={{flex:1}}>
          {n>0?<><div style={{fontWeight:700,color:"var(--green)",fontSize:15}}>{peso(dp)} downpayment</div><div style={{color:"var(--mist)",fontSize:12}}>{n}N Â· {peso(total)} total</div></>:<div style={{color:"var(--mist)",fontSize:14}}>Select dates to see pricing</div>}
        </div>
        <button className="btn btn-forest" onClick={submit}>Continue â†’</button>
      </div>
    </div>
  );
}

/* â”â”â”â” PAYMENT â”â”â”â” */
function PayStep({data,onBack,onConfirm}){
  const {room,ci,co,n,total,dp,name,phone}=data;
  const [method,setMethod]=useState("gcash");
  const [loading,setLoading]=useState(false);
  function confirm(){setLoading(true);setTimeout(()=>onConfirm(method),1200);}
  const METHODS=[
    {id:"gcash",icon:"ğŸ’™",label:"GCash",detail:`${C.gcashNum} Â· ${C.gcashName}`},
    {id:"maya", icon:"ğŸ’š",label:"Maya", detail:`${C.mayaNum}`},
    {id:"bank", icon:"ğŸ¦",label:`Bank Â· ${C.bankName}`,detail:`${C.bankAcct} Â· ${C.bankHolder}`},
  ];
  return(
    <div style={{minHeight:"100vh",background:"var(--ivory)",paddingBottom:20}}>
      <Bar back={onBack}/>
      <div style={{maxWidth:560,margin:"0 auto",padding:"20px 14px 40px"}}>
        <StepBar step={2}/>
        <h2 className="serif" style={{fontSize:26,fontWeight:600,marginBottom:5}}>Confirm &amp; Pay</h2>
        <p style={{color:"var(--mist)",fontSize:14,marginBottom:20}}>Review your booking, then pay the 50% downpayment to secure your room. Balance is collected on arrival.</p>

        <div className="panel" style={{marginBottom:16}}>
          <div className="lbl" style={{marginBottom:12}}>Booking Summary</div>
          {[["Room",room.name],["Guest",name],["Phone",phone],[`${n} Night${n>1?"s":""} Ã— ${peso(room.price)}`,peso(total)],["Check-In",`${fmtD(ci)} Â· ${C.checkIn}`],["Check-Out",`${fmtD(co)} Â· ${C.checkOut}`]].map(([k,v])=>(
            <div key={k} className="irow"><span style={{color:"var(--mist)"}}>{k}</span><span style={{fontWeight:500}}>{v}</span></div>
          ))}
          <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:12,marginTop:4,borderTop:"2px solid var(--linen)"}}>
            <span style={{fontWeight:700,fontSize:15}}>Downpayment Due (50%)</span>
            <span className="serif" style={{fontSize:28,fontWeight:700,color:"var(--green)"}}>{peso(dp)}</span>
          </div>
          <div style={{textAlign:"right",fontSize:12,color:"var(--stone)",marginTop:2}}>Balance on arrival: {peso(total-dp)}</div>
        </div>

        <div className="panel" style={{marginBottom:16}}>
          <div className="lbl" style={{marginBottom:12}}>Payment Method</div>
          <div style={{display:"flex",flexDirection:"column",gap:10}}>
            {METHODS.map(m=>(
              <div key={m.id} className={`popt ${method===m.id?"on":""}`} onClick={()=>setMethod(m.id)}>
                <span style={{fontSize:24,lineHeight:1}}>{m.icon}</span>
                <div style={{flex:1}}>
                  <div style={{fontWeight:600,fontSize:14}}>{m.label}</div>
                  <div style={{fontSize:12,color:"var(--mist)",marginTop:1}}>{m.detail}</div>
                </div>
                <div className="pradio">{method===m.id&&<span style={{color:"#fff",fontSize:10,fontWeight:900}}>âœ“</span>}</div>
              </div>
            ))}
          </div>
        </div>

        <div style={{background:"var(--yellow-pale)",border:"1px solid var(--yellow-b)",borderRadius:10,padding:"13px 16px",marginBottom:20,fontSize:14,color:"var(--bark)",lineHeight:1.75}}>
          ğŸ“² After confirming, send your {METHODS.find(m=>m.id===method).label} payment screenshot to <strong>{C.phone}</strong> with your booking reference. We'll verify within <strong>1â€“2 hours</strong>.
        </div>

        <button className="btn btn-gold btn-lg" style={{width:"100%",justifyContent:"center"}} onClick={confirm} disabled={loading}>
          {loading?<><span className="spinner"/>Processingâ€¦</>:`Confirm & Pay ${peso(dp)}`}
        </button>
        <p style={{textAlign:"center",fontSize:12,color:"var(--stone)",marginTop:12}}>By confirming you agree to our cancellation and refund policy.</p>
      </div>
    </div>
  );
}

/* â”â”â”â” CONFIRMATION â”â”â”â” */
function Confirmed({bk,onReset}){
  const [copied,setCopied]=useState(false);
  const bal=bk.total-bk.downpayment;
  function copyRef(){navigator.clipboard.writeText(bk.ref).then(()=>{setCopied(true);setTimeout(()=>setCopied(false),2000);});}
  return(
    <div style={{minHeight:"100vh",background:"var(--ivory)"}}>
      <div className="topbar noprint"><span className="serif" style={{color:"#fff",fontSize:17,margin:"0 auto"}}>{C.name}</span></div>
      <div style={{maxWidth:580,margin:"0 auto",padding:"20px 14px 40px"}}>
        <StepBar step={3}/>
        <div className="card anim" style={{borderRadius:20,overflow:"hidden"}}>
          {/* Header */}
          <div style={{background:"var(--forest)",padding:"26px 22px",textAlign:"center"}}>
            <div style={{width:62,height:62,background:"rgba(255,255,255,.12)",borderRadius:18,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px",fontSize:30}}>ğŸ‰</div>
            <h2 className="serif" style={{color:"#fff",fontSize:26,fontWeight:600,marginBottom:5}}>Booking Received!</h2>
            <p style={{color:"rgba(255,255,255,.6)",fontSize:14}}>Pending payment verification Â· 1â€“2 hr turnaround</p>
          </div>

          {/* Reference */}
          <div style={{background:"var(--mint-pale)",padding:"18px 20px",textAlign:"center",borderBottom:"2px dashed var(--mint)"}}>
            <div className="lbl" style={{marginBottom:7}}>Your Booking Reference</div>
            <div className="serif" style={{fontSize:32,fontWeight:700,color:"var(--forest)",letterSpacing:".1em",marginBottom:10}}>{bk.ref}</div>
            <button className="btn btn-outline btn-sm" onClick={copyRef}>{copied?"âœ“ Copied!":"ğŸ“‹ Copy Reference"}</button>
            <p style={{fontSize:12,color:"var(--mist)",marginTop:8}}>ğŸ“¸ Screenshot this number</p>
          </div>

          {/* Details */}
          <div style={{padding:"18px 20px"}}>
            <div className="lbl" style={{marginBottom:12}}>Reservation Details</div>
            {[
              ["Room",bk.roomName],["Guest",bk.name],["Phone",bk.phone],
              ["Guests",`${bk.guests} person(s)`],
              ["Check-In",`${fmtD(bk.checkIn)} Â· ${C.checkIn}`],
              ["Check-Out",`${fmtD(bk.checkOut)} Â· ${C.checkOut}`],
              ["Duration",`${bk.n} night${bk.n>1?"s":""}`],
              ["Total Amount",peso(bk.total)],
              ["Downpayment",peso(bk.downpayment)],
              ["Balance on Arrival",peso(bal)],
              ["Payment Via",(bk.payMethod||"").toUpperCase()],
              ["Status","â³ Pending Verification"],
            ].map(([k,v])=>(
              <div key={k} className="irow">
                <span style={{color:"var(--mist)",fontSize:13}}>{k}</span>
                <span style={{fontWeight:500,fontSize:13,textAlign:"right"}}>{v}</span>
              </div>
            ))}
          </div>

          {/* Instruction */}
          <div style={{background:"var(--blue-pale)",borderTop:"1.5px solid #93c5fd",padding:"14px 20px"}}>
            <div style={{fontSize:14,color:"#1a3a8a",lineHeight:1.75}}>
              ğŸ“² Send your <strong>{(bk.payMethod||"").toUpperCase()}</strong> screenshot + reference <strong>{bk.ref}</strong> to <strong>{C.phone}</strong> on Viber or Facebook to complete your reservation.
            </div>
          </div>

          {/* Actions */}
          <div style={{padding:"16px 20px",display:"flex",gap:10}}>
            <button className="btn btn-forest noprint" style={{flex:1}} onClick={onReset}>Book Another</button>
            <button className="btn btn-ghost noprint" style={{flex:1}} onClick={()=>window.print()}>ğŸ–¨ Print</button>
          </div>
        </div>
        <p style={{textAlign:"center",fontSize:12,color:"var(--stone)",marginTop:16,lineHeight:1.7}}>
          {C.name} Â· {C.address}<br/>{C.phone} Â· {C.fb}
        </p>
      </div>
    </div>
  );
}

/* â”â”â”â” ROOT APP â”â”â”â” */
function App(){
  const [view,setView]=useState("guest");
  const [step,setStep]=useState("home");
  const [bookings,setBookings]=useState([]);
  const [loading,setLoading]=useState(true);
  const [selRoom,setSelRoom]=useState(null);
  const [initCI,setInitCI]=useState(""), [initCO,setInitCO]=useState("");
  const [formData,setFormData]=useState(null);
  const [finalBk,setFinalBk]=useState(null);

  useEffect(()=>{setBookings(DB.load());setLoading(false);},[]);

  function persist(list){setBookings(list);DB.save(list);}
  function handleUpdate(u){persist(bookings.map(b=>b.ref===u.ref?u:b));}
  function handleDelete(ref){persist(bookings.filter(b=>b.ref!==ref));}

  function handleBook(r,ci,co,datesSet){
    setSelRoom(r);
    setInitCI(datesSet&&ci?ci:"");
    setInitCO(datesSet&&co?co:"");
    setStep("form");
    window.scrollTo(0,0);
  }

  function handleFormNext(data){setFormData(data);setStep("pay");window.scrollTo(0,0);}

  function handleConfirm(method){
    const ref=genRef();
    const bk={
      ref, roomId:formData.room.id, roomName:formData.room.name, roomType:formData.room.type,
      roomRate:formData.room.price, checkIn:formData.ci, checkOut:formData.co, n:formData.n,
      total:formData.total, downpayment:formData.dp, payMethod:method,
      name:formData.name, phone:formData.phone, email:formData.email||"",
      guests:formData.guests, guestNotes:formData.notes||"",
      guestName:formData.name, guestPhone:formData.phone,
      guestEmail:formData.email||"", guestGuests:formData.guests,
      status:"pending_verification", createdAt:new Date().toISOString(),
    };
    const updated=[...bookings,bk];
    persist(updated);
    setFinalBk(bk);
    setStep("confirm");
    window.scrollTo(0,0);
  }

  function reset(){setStep("home");setSelRoom(null);setFormData(null);setFinalBk(null);setInitCI("");setInitCO("");window.scrollTo(0,0);}

  if(loading)return(
    <div style={{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"var(--ivory)",gap:14}}>
      <div style={{width:38,height:38,border:"3px solid var(--mint)",borderTopColor:"var(--green)",borderRadius:"50%",animation:"spin .8s linear infinite"}}/>
      <p style={{color:"var(--mist)",fontSize:14}}>{C.name}</p>
    </div>
  );

  if(view==="admin-login")return <AdminLogin onOk={()=>setView("admin")} onBack={()=>setView("guest")}/>;
  if(view==="admin")return <AdminDash bookings={bookings} onUpdate={handleUpdate} onDelete={handleDelete} onLogout={()=>setView("guest")}/>;

  if(step==="home")   return <Home    bookings={bookings} onBook={handleBook} onAdmin={()=>setView("admin-login")}/>;
  if(step==="form")   return <BookForm room={selRoom} initCI={initCI} initCO={initCO} bookings={bookings} onBack={reset} onNext={handleFormNext}/>;
  if(step==="pay")    return <PayStep  data={formData} onBack={()=>setStep("form")} onConfirm={handleConfirm}/>;
  if(step==="confirm")return <Confirmed bk={finalBk} onReset={reset}/>;
  return null;
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
